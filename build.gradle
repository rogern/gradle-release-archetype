apply plugin: 'java'
apply plugin: 'maven'

buildscript {
  repositories {
    maven {
      url "https://oss.sonatype.org/content/groups/public"
    }
  }
  dependencies {
    classpath 'com.github.townsfolk:gradle-release:1.2'
  }
}

apply plugin: 'release'

uploadArchives.repositories.mavenDeployer {
  uniqueVersion = false
  // credentials and repositories from gradle.properties
  repository(url: releaseRepository) {
    authentication(userName: releasesUsername, password: releasesPassword)
  }

  snapshotRepository(url: snapshotRepository) {
    authentication(userName: snapshotsUsername, password: snapshotsPassword)
  }
}

createReleaseTag.dependsOn uploadArchives